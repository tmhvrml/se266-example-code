
<html>
    <head>
        <title>Teams Ajax Example</title>
          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
           <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
           <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
           <style type="text/css">
               body {margin-left: 50px; margin-top:50px;}
           </style>
         <script>
           
              function displayTeams(teams) 
              {
                   for (i = 0; i < teams.length; i++) 
                   {
                       $("#team_list").append('<li>' + teams[i].teamName + ' [' + teams[i].division + ']</li>');
                   }
               }
           
               async function add_team () 
               {
                   var team_name = document.getElementById("team_name").value;
                   var division = document.getElementById("division").value;
                   
                   const ajaxURL = 'insert_team.php';
                   const ajaxJSONdata = { team_name: team_name, division: division };
                   var teamID = null;
                   try 
                   {
                        const response = await fetch(ajaxURL, 
                                        {
                                            method: 'POST', 
                                            body: JSON.stringify(ajaxJSONdata), 
                                            headers: 
                                            {
                                                'Content-Type': 'application/json'
                                            }
                                        }); // end ajax fetch
                         id = await response.json();
                  }
                  catch (error) 
                  {
                       console.error (error);
                  }
                                       
                     
                  $("#team_list").append('<li>' + team_name + ' [' + division + ']</li>');
                  document.getElementById("message").innerHTML = "Added Team: " + team_name + ", Division: " + division + " -> Id: " + id;
                
               }
           
               async function loadPage(event) 
               {
                   const ajaxURL = 'getTeams.php';
                   let json = null;
                   try {
                       const response = await fetch(ajaxURL, 
                                            {
                                                method: 'GET'
                                            });
                        json = await response.json();
                     } catch (error) {
                         console.error (error);          
                     }

                     displayTeams (json);
               }
        </script>               
    </head>
    <body onload="loadPage()">
        <div id="add_team_div">
            <h4>Add Team</h4>
            <label>Team Name</label>
            <input type="text" id="team_name" value="">
            <br />
            <label>Division&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <input type="text" id="division">
            <input type="button" id="add_team" onclick="add_team()" value="Add Team">
            
        </div>
        <div id="message"></div>
        <div>
            <h2>Teams</h2>
             <ul id="team_list">
                
            </ul>
        </div>

        


    </body>
</html>
